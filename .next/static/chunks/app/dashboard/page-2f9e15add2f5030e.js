(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7668:(e,t,s)=>{Promise.resolve().then(s.bind(s,5399))},5399:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),i=s(2115),l=s(4651),r=s(3562),c=s(8207),n=s(1909),o=s(3662),d=s(7678),x=s(734),u=s(7564),h=s(6855),m=s(7072),g=s(4826),b=s(2526),j=s(9904),y=s(5158),p=s(224),N=s(5029),v=s(1340),f=s(5037);function w(){var e;let{user:t,loading:s}=(0,l.A)(),[w,A]=(0,i.useState)([]),[S,C]=(0,i.useState)([]),[P,E]=(0,i.useState)(!1),[D,F]=(0,i.useState)(!0);(0,i.useEffect)(()=>{t&&!s&&R()},[t,s]);let R=async()=>{try{let[e,t]=await Promise.all([(0,y.J)(),(0,v.p)(5)]);A(e),C(t)}catch(e){console.error("Error loading dashboard data:",e),f.Ay.error("Failed to load dashboard data")}finally{F(!1)}},U=()=>{E(!0)},k=async e=>{try{let t=await (0,p.E)(e);t.success?(f.Ay.success("Pipeline triggered successfully!"),R()):f.Ay.error(t.error||"Failed to trigger pipeline")}catch(e){f.Ay.error("Failed to trigger pipeline")}},I=async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{let t=await (0,N.x)(e);t.success?(f.Ay.success("Project deleted successfully"),R()):f.Ay.error(t.error||"Failed to delete project")}catch(e){f.Ay.error("Failed to delete project")}};if(s||D)return(0,a.jsx)("div",{className:"min-h-screen bg-github-bg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-github-accent mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-github-text-secondary",children:"Loading dashboard..."})]})});if(!t)return(0,a.jsx)("div",{className:"min-h-screen bg-github-bg flex items-center justify-center",children:(0,a.jsx)(c.Zp,{variant:"glass",className:"max-w-md mx-auto",children:(0,a.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-github-text mb-4",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-github-text-secondary mb-6",children:"Please sign in to access the dashboard."}),(0,a.jsx)(n.$,{onClick:()=>window.location.href="/api/auth/signin",children:"Sign In"})]})})});let L=[{label:"Total Projects",value:w.length,icon:h.A,color:"text-blue-400",bg:"bg-blue-500/10"},{label:"Active Pipelines",value:S.filter(e=>"RUNNING"===e.status).length,icon:m.A,color:"text-yellow-400",bg:"bg-yellow-500/10"},{label:"Successful Deployments",value:S.filter(e=>"SUCCESS"===e.status).length,icon:g.A,color:"text-green-400",bg:"bg-green-500/10"},{label:"Failed Deployments",value:S.filter(e=>"FAILED"===e.status).length,icon:b.A,color:"text-red-400",bg:"bg-red-500/10"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-github-bg",children:[(0,a.jsx)(x.Y,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-github-text mb-2",children:["Welcome back, ",null==t?void 0:null===(e=t.name)||void 0===e?void 0:e.split(" ")[0],"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-github-text-secondary text-lg",children:"Manage your projects and monitor deployments from your dashboard."})]}),(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:L.map((e,t)=>(0,a.jsx)(c.Zp,{variant:"glass",hover:!0,children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-github-text-secondary text-sm font-medium",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold text-github-text mt-1",children:e.value})]}),(0,a.jsx)("div",{className:"p-3 rounded-xl ".concat(e.bg),children:(0,a.jsx)(e.icon,{className:"h-6 w-6 ".concat(e.color)})})]})})},e.label))}),(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-github-text",children:"Your Projects"}),(0,a.jsxs)(n.$,{onClick:U,children:[(0,a.jsx)(j.A,{className:"h-5 w-5 mr-2"}),"Create Project"]})]}),0===w.length?(0,a.jsx)(c.Zp,{variant:"glass",className:"text-center py-12",children:(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)(h.A,{className:"h-16 w-16 text-github-text-tertiary mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-github-text mb-2",children:"No projects yet"}),(0,a.jsx)("p",{className:"text-github-text-secondary mb-6",children:"Create your first Next.js project to get started with automated deployments."}),(0,a.jsxs)(n.$,{onClick:U,children:[(0,a.jsx)(j.A,{className:"h-5 w-5 mr-2"}),"Create Your First Project"]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((e,t)=>(0,a.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,a.jsx)(o.U,{project:e,onTriggerPipeline:k,onDelete:I})},e.id))})]}),S.length>0&&(0,a.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-github-text mb-6",children:"Recent Activity"}),(0,a.jsxs)(c.Zp,{variant:"glass",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-github-text",children:"Pipeline Activity"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:S.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-github-bg-tertiary rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat("SUCCESS"===e.status?"bg-green-500/10":"FAILED"===e.status?"bg-red-500/10":"RUNNING"===e.status?"bg-blue-500/10":"bg-yellow-500/10"),children:"SUCCESS"===e.status?(0,a.jsx)(g.A,{className:"h-5 w-5 text-green-400"}):"FAILED"===e.status?(0,a.jsx)(b.A,{className:"h-5 w-5 text-red-400"}):(0,a.jsx)(m.A,{className:"h-5 w-5 text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-github-text font-medium",children:null===(s=e.project)||void 0===s?void 0:s.name}),(0,a.jsxs)("p",{className:"text-github-text-secondary text-sm",children:[e.stage&&"".concat(e.stage," â€¢ "),new Date(e.createdAt).toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("SUCCESS"===e.status?"bg-green-500/10 text-green-400":"FAILED"===e.status?"bg-red-500/10 text-red-400":"RUNNING"===e.status?"bg-blue-500/10 text-blue-400":"bg-yellow-500/10 text-yellow-400"),children:e.status})]},e.id)})})})]})]})]}),(0,a.jsx)(u.w,{}),(0,a.jsx)(d.D,{isOpen:P,onClose:()=>E(!1),onSuccess:()=>{R()}})]})}},1340:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5828);let i=(0,a.createServerReference)("405c9b6b525f6ce03f5882208783da38ec5a910294",a.callServer,void 0,a.findSourceMapURL,"getRecentPipelines")}},e=>{var t=t=>e(e.s=t);e.O(0,[178,715,37,64,534,233,939,441,517,358],()=>t(7668)),_N_E=e.O()}]);